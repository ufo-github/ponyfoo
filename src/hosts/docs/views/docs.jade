!!! 5

html(lang='en', ng-app='docsApp', ng-controller='DocsController')
  head
    include /src/frontend/views/metadata

    meta(name='fragment', content='!')
    meta(name='description', content="Pony Foo is an open blogging platform that\'s designed with maximum transparency in mind. It aims to be beautiful, yet powerful and fully customizable. We place utmost importance in user experience, both for bloggers and their reader base.")

    title(ng-bind-template='Pony Foo: {{partialTitle}}')='Pony Foo Documentation'

    != assetify.css.emit()
    link(href='http://fonts.googleapis.com/css?family=Roboto|Roboto:300|Roboto:900', rel='stylesheet')

    script(src='/js/docs-setup.js')
    != assetify.js.emit()

  body
    header.header
      div.navvar.navvar-fixed.fixed-top
        div.navvar-inner
          div.container
            a.brand='Pony Foo Documentation'

            ul.nav
              li(ng-repeat='(url, name) in sections', ng-class='{active: isActivePath(url)}')
                a(ng-href='{{url}}')
                  i.icon-book.icon-white
                  span='{{name}}'

    div.container(role='main')
      div.row.clear-navvar
      div.row
        div.span3
          form.well.form-search(ng-submit='submitForm()')
            div.dropdown.search(ng-class='{open: focused && bestMatch.rank > 0 && bestMatch.page != currentPage}')
              input.input-medium.search-query(type='text', ng-model='search', placeholder='search the docs', tabindex='1', accesskey='s', focused='focused')

              ul.dropdown-menu
                li
                  a(href='{{bestMatch.page.url}}')='{{bestMatch.page.shortName}}'

            div.spacer
            div(ng-show='search')='Filtered results:'

            ul.nav.nav-list(ng-hide='page')
              li(ng-repeat='page in pages track by page.url', ng-class='navClass(page)')

            ul.nav.nav-list.well(ng-repeat='module in modules track by module.url')
              li.nav-header.module
                a.guide(href='{{URL.module}}')='module'
                a.code(href='{{module.url}}')='{{module.name}}'

              li.nav-header.section(ng-show='module.directives')
                a.guide(href='{{URL.directive}}')='directive'

              li(ng-repeat='page in module.directives track by page.url', ng-class='navClass(page)', ng-animate="'expand'")
                a(href='{{page.url}}', tabindex='2')='{{page.shortName}}'

              li.nav-header.section(ng-show='module.filters')
                a.guide(href='{{URL.filter}}')='filter'

              li(ng-repeat='page in module.filters track by page.url', ng-class='navClass(page)', ng-animate="'expand'")
                a(href='{{page.url}}', tabindex='2')='{{page.shortName}}'

              li.nav-header.section(ng-show='module.services')
                a.guide(href='{{URL.service}}')='service'

              li(ng-repeat='service in module.services track by service.instance.url', ng-class='navClass(service.instance, service.provider)', ng-animate="'expand'")
                a.pull-right(ng-show='service.provider', href='{{service.provider.url}}', tabindex='2')
                  i.icon-cog

                a(href='{{service.instance.url}}', tabindex='2')='{{service.name}}'

              li.nav-header.section(ng-show='module.types')
                a.guide(href='{{URL.type}}')='Types'

              li(ng-repeat='page in module.types track by page.url', ng-class='navClass(page)', ng-animate="'expand'")
                a(href='{{page.url}}', tabindex='2')='{{page.shortName}}'

              li.nav-header.section(ng-show='module.globals')
                a.guide.global(href='{{URL.api}}')='global APIs'

              li(ng-repeat='page in module.globals track by page.url', ng-class='navClass(page)', ng-animate="'expand'")
                a(href='{{page.url}}', tabindex='2')='{{page.id}}'

        div.span9
          ul.breadcrumb
            li(ng-repeat='crumb in breadcrumb')
              span(ng-hide='crumb.url')='{{crumb.name}}'
              a(ng-show='crumb.url', href='{{crumb.url}}')='{{crumb.name}}'
              span.divider(ng-show='crumb.url')='/'

          div#loading(ng-show='loading')='Loading...'
          div.content(ng-hide='loading', ng-include, src='currentPage.partialUrl', onload='afterPartialLoaded()', autoscroll, ng-animate="{enter: 'slide-reveal'}")

          div#disqus.disqus
            h2='Discussion'
            div#disqus_thread.content-panel-content

    footer.footer
      include /src/frontend/views/platform-links